[gd_scene load_steps=20 format=4 uid="uid://bmutm3ald4rc4"]

[ext_resource type="Texture2D" uid="uid://ctqcuk7f3vy7h" path="res://Purple.png" id="1_j8rcx"]
[ext_resource type="Texture2D" uid="uid://dsglafsk6rax8" path="res://Ally1.png" id="2_58b44"]
[ext_resource type="PackedScene" uid="uid://c8lwhih3bihrn" path="res://Player.tscn" id="2_twxv3"]
[ext_resource type="Texture2D" uid="uid://c2v3thd6x0gq" path="res://Ally2.png" id="3_3xuu3"]
[ext_resource type="Texture2D" uid="uid://bgawm8hu1rl2j" path="res://bulblight.png" id="3_iln86"]
[ext_resource type="Texture2D" uid="uid://c0bvuf6331m1y" path="res://Ally3.png" id="4_lxpsu"]
[ext_resource type="PackedScene" uid="uid://c45ojno7rl6oe" path="res://ally_followpoints.tscn" id="6_3v5km"]
[ext_resource type="Texture2D" uid="uid://c6amleg4p5hrr" path="res://Floor.png" id="7_s70e5"]
[ext_resource type="Texture2D" uid="uid://bma5h1h68wws1" path="res://Block.png" id="8_vhwtv"]
[ext_resource type="Texture2D" uid="uid://drqgoqvc2r0ir" path="res://Wall.png" id="10_32q2q"]
[ext_resource type="Texture2D" uid="uid://djyokpc7kvm0d" path="res://75x75tileset.png" id="13_7ifjp"]
[ext_resource type="Texture2D" uid="uid://gcjeknlkcseb" path="res://icon.svg" id="13_c2iby"]
[ext_resource type="PackedScene" uid="uid://dxy636pajun4c" path="res://checkpoint.tscn" id="14_ftnco"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_k41b6"]
size = Vector2(955, 62)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2uth4"]
size = Vector2(72, 72)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_bwha1"]
size = Vector2(13.9082, 360.223)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_0eoq8"]
size = Vector2(124, 124)

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_hehte"]
texture = ExtResource("13_7ifjp")
texture_region_size = Vector2i(75, 75)
0:0/0 = 0
0:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-37.5, -37.5, 37.5, -37.5, 37.5, 37.5, -37.5, 37.5)
1:0/0 = 0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-37.5, -37.5, 37.5, -37.5, 37.5, 37.5, -37.5, 37.5)
2:0/0 = 0
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-37.5, -37.5, 37.5, -37.5, 37.5, 37.5, -37.5, 37.5)
0:1/0 = 0
0:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-37.5, -37.5, 37.5, -37.5, 37.5, 37.5, -37.5, 37.5)
2:1/0 = 0
2:1/0/physics_layer_0/polygon_0/points = PackedVector2Array(-37.5, -37.5, 37.5, -37.5, 37.5, 37.5, -37.5, 37.5)
0:2/0 = 0
0:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-37.5, -37.5, 37.5, -37.5, 37.5, 37.5, -37.5, 37.5)
1:2/0 = 0
1:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-37.5, -37.5, 37.5, -37.5, 37.5, 37.5, -37.5, 37.5)
2:2/0 = 0
2:2/0/physics_layer_0/polygon_0/points = PackedVector2Array(-37.5, -37.5, 37.5, -37.5, 37.5, 37.5, -37.5, 37.5)

[sub_resource type="TileSet" id="TileSet_nb3gb"]
tile_size = Vector2i(75, 75)
physics_layer_0/collision_layer = 2
sources/0 = SubResource("TileSetAtlasSource_hehte")

[node name="Testlevel" type="Node"]

[node name="CharacterBody2D" parent="." instance=ExtResource("2_twxv3")]
z_index = 3
position = Vector2(567, -842)
collision_mask = 22

[node name="Camera2D" type="Camera2D" parent="CharacterBody2D"]
position = Vector2(-1, -132)
offset = Vector2(0.005, 0)
zoom = Vector2(1.015, 1.015)
position_smoothing_enabled = true
position_smoothing_speed = 10.355

[node name="Ally1" type="Sprite2D" parent="."]
unique_name_in_owner = true
z_index = 2
position = Vector2(355, -862)
scale = Vector2(0.1, 0.1)
texture = ExtResource("2_58b44")

[node name="PointLight2D" type="PointLight2D" parent="Ally1"]
scale = Vector2(1.37, 1.37)
color = Color(1, 1, 0.00784314, 1)
texture = ExtResource("3_iln86")
offset = Vector2(2.26, -104.5)

[node name="Ally2" type="Sprite2D" parent="."]
unique_name_in_owner = true
z_index = 2
position = Vector2(285, -864)
scale = Vector2(0.1, 0.1)
texture = ExtResource("3_3xuu3")

[node name="PointLight2D" type="PointLight2D" parent="Ally2"]
scale = Vector2(1.54, 1.54)
color = Color(0.96623, 2.38247e-06, 5.77569e-07, 1)
texture = ExtResource("3_iln86")
offset = Vector2(1.58, -82.615)

[node name="Ally3" type="Sprite2D" parent="."]
unique_name_in_owner = true
z_index = 2
position = Vector2(221, -866)
scale = Vector2(0.1, 0.1)
texture = ExtResource("4_lxpsu")

[node name="PointLight2D" type="PointLight2D" parent="Ally3"]
scale = Vector2(1.715, 1.715)
color = Color(0, 0.764137, 0.279062, 1)
texture = ExtResource("3_iln86")
offset = Vector2(-0.98, -78.935)

[node name="TextureRect" type="TextureRect" parent="."]
visible = false
z_index = -3
z_as_relative = false
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -325.0
offset_top = -339.0
offset_right = 2129.0
offset_bottom = 10629.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("1_j8rcx")
stretch_mode = 1

[node name="Floor_tool" type="StaticBody2D" parent="."]
unique_name_in_owner = true
visible = false
position = Vector2(253, -42)
scale = Vector2(0.87, 1.13)
collision_layer = 4
collision_mask = 9

[node name="Tool_collision_shape" type="CollisionShape2D" parent="Floor_tool"]
position = Vector2(0.5, -1)
scale = Vector2(0.875, 1.04)
shape = SubResource("RectangleShape2D_k41b6")

[node name="Floor_tool_sprite" type="Sprite2D" parent="Floor_tool"]
modulate = Color(0.970595, 0.970595, 3.85046e-06, 1)
scale = Vector2(0.875, 1.04)
texture = ExtResource("7_s70e5")

[node name="Block_tool" type="StaticBody2D" parent="."]
unique_name_in_owner = true
visible = false
position = Vector2(571, -752)
collision_layer = 4
collision_mask = 9

[node name="Tool_collision_shape" type="CollisionShape2D" parent="Block_tool"]
shape = SubResource("RectangleShape2D_2uth4")

[node name="Block_tool_sprite" type="Sprite2D" parent="Block_tool"]
position = Vector2(1.52588e-05, 2.09808e-05)
scale = Vector2(0.637168, 0.635442)
texture = ExtResource("8_vhwtv")

[node name="Wall_tool" type="StaticBody2D" parent="."]
unique_name_in_owner = true
visible = false
position = Vector2(-254, -6)
scale = Vector2(1.438, 1.438)
collision_layer = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="Wall_tool"]
position = Vector2(-2.0504e-05, 0.000157595)
shape = SubResource("RectangleShape2D_bwha1")

[node name="Wall_tool_sprite" type="Sprite2D" parent="Wall_tool"]
modulate = Color(0, 0.929412, 0.0941176, 1)
position = Vector2(-2.0504e-05, 3.57628e-05)
scale = Vector2(0.331147, 0.509509)
texture = ExtResource("10_32q2q")

[node name="Ally_followpoints" parent="." instance=ExtResource("6_3v5km")]

[node name="Deadzone" type="Area2D" parent="."]
position = Vector2(427, 24)
collision_layer = 16

[node name="Sprite2D" type="Sprite2D" parent="Deadzone"]
texture = ExtResource("13_c2iby")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Deadzone"]
shape = SubResource("RectangleShape2D_0eoq8")

[node name="Checkpoint" parent="." instance=ExtResource("14_ftnco")]
position = Vector2(619, 97)

[node name="Checkpoint2" parent="." instance=ExtResource("14_ftnco")]
position = Vector2(1954, 96)

[node name="TileMap" type="Node" parent="."]

[node name="Layer0" type="TileMapLayer" parent="TileMap"]
use_parent_material = true
tile_map_data = PackedByteArray("AAAEAPb/AAABAAAAAAAFAPb/AAABAAAAAAAGAPb/AAABAAAAAAAHAPb/AAABAAAAAAAIAPb/AAABAAAAAAAJAPb/AAABAAAAAAAKAPb/AAABAAAAAAALAPb/AAABAAAAAAAMAPb/AAABAAAAAAANAPb/AAABAAAAAAAOAPb/AAABAAAAAAAPAPb/AAACAAAAAAAPAPf/AAACAAEAAAAPAPj/AAACAAIAAAAOAPj/AAABAAIAAAANAPj/AAABAAIAAAAMAPj/AAABAAIAAAALAPj/AAABAAIAAAAKAPj/AAABAAIAAAAJAPj/AAABAAIAAAAIAPj/AAABAAIAAAAHAPj/AAABAAIAAAAGAPj/AAABAAIAAAAFAPj/AAABAAIAAAAEAPj/AAABAAIAAAADAPj/AAAAAAIAAAADAPf/AAAAAAEAAAADAPb/AAAAAAAAAAAPAPX/AAAAAAEAAAAPAPT/AAAAAAEAAAAPAPP/AAAAAAEAAAAPAPL/AAAAAAAAAAAQAPL/AAABAAAAAAARAPL/AAABAAAAAAASAPL/AAABAAAAAAAOAPP/AAABAAIAAAANAPP/AAABAAIAAAA=")
tile_set = SubResource("TileSet_nb3gb")

[connection signal="visibility_changed" from="Floor_tool/Floor_tool_sprite" to="Ally_followpoints" method="_on_floor_tool_sprite_visibility_changed"]
[connection signal="visibility_changed" from="Block_tool" to="Ally_followpoints" method="_on_block_tool_visibility_changed"]
[connection signal="visibility_changed" from="Wall_tool" to="Ally_followpoints" method="_on_wall_tool_visibility_changed"]
[connection signal="area_entered" from="Deadzone" to="CharacterBody2D" method="_on_deadzone_area_entered"]
[connection signal="body_entered" from="Deadzone" to="CharacterBody2D" method="_on_deadzone_body_entered"]
