[gd_scene load_steps=13 format=3 uid="uid://c8lwhih3bihrn"]

[ext_resource type="Script" path="res://character_movement.gd" id="1_ac4tx"]
[ext_resource type="PackedScene" uid="uid://dpynb1w5bp435" path="res://Player_cutout.tscn" id="2_10mar"]
[ext_resource type="Script" path="res://state_handler.gd" id="2_asryv"]
[ext_resource type="Script" path="res://tool_state_handler.gd" id="2_yocoj"]
[ext_resource type="Texture2D" uid="uid://bma5h1h68wws1" path="res://Block.png" id="5_8eind"]
[ext_resource type="Texture2D" uid="uid://c6amleg4p5hrr" path="res://Floor.png" id="6_03mwq"]
[ext_resource type="Script" path="res://ally_destination.gd" id="6_b7brx"]
[ext_resource type="Texture2D" uid="uid://drqgoqvc2r0ir" path="res://Wall.png" id="7_ax4cp"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_o8e7j"]
size = Vector2(75, 130)

[sub_resource type="Curve2D" id="Curve2D_aeka8"]
_data = {
"points": PackedVector2Array(0.449019, 62.8734, -0.449019, -62.8734, -159.864, 1.86053, -159.248, -0.406326, 159.248, 0.406326, -0.461417, -82.2726, 0.22094, -55.4753, -0.22094, 55.4753, 158.941, 1.86053, 125.405, -0.264567, -125.405, 0.264567, -0.461417, 57.2393, -0.707183, 59.3097, 0.707183, -59.3097, -159.864, 1.86053)
}
point_count = 5

[sub_resource type="RectangleShape2D" id="RectangleShape2D_rih21"]
size = Vector2(75, 4)

[sub_resource type="CircleShape2D" id="CircleShape2D_2jk2y"]
radius = 1.0

[node name="CharacterBody2D" type="CharacterBody2D"]
collision_mask = 6
script = ExtResource("1_ac4tx")

[node name="Tool_state_handler" type="Node" parent="."]
script = ExtResource("2_yocoj")

[node name="State_handler" type="Node" parent="."]
script = ExtResource("2_asryv")

[node name="Coyote" type="Timer" parent="State_handler"]
wait_time = 0.218
one_shot = true

[node name="Jump_buffer" type="Timer" parent="State_handler"]
wait_time = 0.105
one_shot = true

[node name="Model_position" type="Node2D" parent="."]

[node name="Player_cutout" parent="Model_position" instance=ExtResource("2_10mar")]
scale = Vector2(1.395, 1.395)

[node name="P_speed_timer" type="Timer" parent="."]
wait_time = 1.6
one_shot = true

[node name="Supercancel_timer" type="Timer" parent="."]
wait_time = 0.5
one_shot = true

[node name="Caster_outer_right_ceiling" type="RayCast2D" parent="."]
position = Vector2(42, -83)
target_position = Vector2(0, -16)
collision_mask = 6

[node name="Caster_inner_left_ceiling" type="RayCast2D" parent="."]
position = Vector2(-22, -83)
target_position = Vector2(0, -30)
collision_mask = 6

[node name="Caster_inner_right_ceiling" type="RayCast2D" parent="."]
position = Vector2(31, -83)
target_position = Vector2(0, -32)
collision_mask = 6

[node name="Caster_outer_left_ceiling" type="RayCast2D" parent="."]
position = Vector2(-33, -83)
target_position = Vector2(0, -16)
collision_mask = 6

[node name="Caster_right_wall" type="RayCast2D" parent="."]
position = Vector2(42, 15)
target_position = Vector2(16, 0)
collision_mask = 6

[node name="Caster_right_wall2" type="RayCast2D" parent="."]
position = Vector2(42, -20)
target_position = Vector2(18, 0)
collision_mask = 6

[node name="Caster_left_wall" type="RayCast2D" parent="."]
position = Vector2(-33, 15)
target_position = Vector2(-17, 0)
collision_mask = 6

[node name="Caster_left_wall2" type="RayCast2D" parent="."]
position = Vector2(-33, -19)
target_position = Vector2(-18, 0)
collision_mask = 6

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(4.5, -18)
shape = SubResource("RectangleShape2D_o8e7j")

[node name="Sprite_block_tool" type="Sprite2D" parent="."]
visible = false
modulate = Color(1, 1, 1, 0.34902)
position = Vector2(4, 89)
scale = Vector2(0.646018, 0.646018)
texture = ExtResource("5_8eind")

[node name="Path2D" type="Path2D" parent="."]
position = Vector2(1.75417, -6.98807)
scale = Vector2(3.8017, 3.75595)
curve = SubResource("Curve2D_aeka8")

[node name="Follow_floor_tool" type="PathFollow2D" parent="Path2D"]
unique_name_in_owner = true
position = Vector2(-159.864, 1.86053)
rotation = -0.5916
rotates = false

[node name="Sprite_floor_tool" type="Sprite2D" parent="Path2D/Follow_floor_tool"]
visible = false
modulate = Color(1, 1, 1, 0.34902)
position = Vector2(0.70002, 0.0647659)
rotation = 0.5916
scale = Vector2(0.211, 0.328)
texture = ExtResource("6_03mwq")

[node name="Floor_typecheck" type="Area2D" parent="."]
collision_layer = 8
collision_mask = 4

[node name="CollisionShape2D" type="CollisionShape2D" parent="Floor_typecheck"]
position = Vector2(4.5, 49)
shape = SubResource("RectangleShape2D_rih21")

[node name="Sprite_wall_tool" type="Sprite2D" parent="."]
visible = false
modulate = Color(1, 1, 1, 0.34902)
position = Vector2(190, -1)
scale = Vector2(0.485238, 0.734088)
texture = ExtResource("7_ax4cp")

[node name="Ally_destination" type="Area2D" parent="."]
position = Vector2(-48.345, 0)
collision_layer = 512
collision_mask = 0
script = ExtResource("6_b7brx")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Ally_destination"]
shape = SubResource("CircleShape2D_2jk2y")

[connection signal="timeout" from="P_speed_timer" to="." method="_on_p_speed_timer_timeout"]
[connection signal="body_entered" from="Floor_typecheck" to="." method="_on_floor_typecheck_body_entered"]
[connection signal="body_exited" from="Floor_typecheck" to="." method="_on_floor_typecheck_body_exited"]
